<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Include Gurias - Painel Bolsista</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />

    <style>
        :root {
            --bg-sidebar: #E0C3FC;
            --bg-main: #EFE5FD; /* Um tom mais claro para o fundo */
            --primary-purple: #9D4EDD;
            --dark-text: #2D0048;
            --card-bg: #E0C3FC;
            --button-purple: #C77DFF;
            --badge-green: #C6F6D5;
            --badge-green-text: #22543D;
            --badge-red: #FED7D7;
            --badge-red-text: #822727;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-main);
            overflow-x: hidden;
        }

        .wrapper {
            display: flex;
            width: 100%;
            height: 100vh;
        }

        #sidebar {
            min-width: 250px;
            max-width: 250px;
            background: var(--bg-sidebar);
            color: var(--dark-text);
            padding: 20px;
        }

        .sidebar-header h3 {
            font-weight: 700;
            margin-bottom: 0;
        }
        
        .sidebar-header p {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            cursor: pointer;
            text-decoration: none;
            color: var(--dark-text);
            font-weight: 500;
            transition: all 0.3s;
        }

        .menu-item:hover {
            background-color: rgba(255,255,255,0.3);
        }

        .menu-item.active {
            background-color: #C084FC;
            color: #fff;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .menu-item .material-symbols-outlined {
            margin-right: 10px;
        }

        #content {
            width: 100%;
            padding: 40px;
            overflow-y: auto;
        }

        .header-box {
            background-color: #D8B4FE;
            padding: 20px;
            border-radius: 12px;
            display: inline-block;
            margin-bottom: 30px;
        }

        .card-custom {
            background-color: var(--card-bg);
            border: none;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            transition: transform 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        .card-custom:hover {
            transform: translateY(-5px);
        }

        .card-title-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .card-title {
            font-weight: 700;
            color: var(--dark-text);
            margin: 0;
            font-size: 1.2rem;
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .status-ativo {
            background-color: var(--badge-green);
            color: var(--badge-green-text);
        }

        .status-inativo {
            background-color: var(--badge-red);
            color: var(--badge-red-text);
        }

        .location-row {
            display: flex;
            align-items: center;
            color: #4A5568;
            margin-bottom: 10px;
            font-size: 0.95rem;
        }

        .location-row span {
            margin-right: 5px;
            font-size: 1.1rem;
        }

        .last-status {
            font-size: 0.85rem;
            color: #4A5568;
            margin-bottom: 20px;
            line-height: 1.4;
        }

        .btn-more {
            background-color: #A855F7;
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 8px;
            font-weight: 500;
            width: 100%;
            transition: background 0.3s;
        }

        .btn-more:hover {
            background-color: #9333EA;
            color: white;
        }

        .modal-header { background-color: var(--bg-sidebar); border-bottom: none; }
        .modal-footer { border-top: none; }
        .btn-primary-custom { background-color: #A855F7; border: none; }
        .btn-primary-custom:hover { background-color: #9333EA; }

    </style>
</head>
<body>

<div class="wrapper">
    <nav id="sidebar">
        <div class="sidebar-header mb-5">
            <h3>Include<br>Gurias</h3>
            <p>Painel Administrativo</p>
        </div>

        <a href="#" class="menu-item active">
            <span class="material-symbols-outlined">ecg_heart</span>
            Atividades
        </a>
        
        <a href="#" class="menu-item">
            <span class="material-symbols-outlined">group</span>
            Bolsistas
        </a>

        <a href="#" class="menu-item">
            <span class="material-symbols-outlined">person</span>
            Perfil
        </a>
    </nav>

    <div id="content">
        
        <div class="row">
            <div class="col-12 text-end">
                <div class="header-box text-start">
                    <h6 style="font-weight: 700; color: #2D0048;">Nova Atividade <span class="material-symbols-outlined" style="font-size: 1rem; vertical-align: middle;">add_circle</span></h6>
                    <button class="btn btn-primary-custom mt-2" data-bs-toggle="modal" data-bs-target="#modalNovaAtividade">
                        Adicionar Nova Atividade
                    </button>
                </div>
            </div>
        </div>

        <div class="row" id="cardsContainer">
            </div>

    </div>
</div>

<div class="modal fade" id="modalNovaAtividade" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Registrar Atividade</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="formAtividade">
                    <div class="mb-3">
                        <label class="form-label">Título da Atividade</label>
                        <input type="text" class="form-control" id="tituloInput" placeholder="Ex: Escola 1, Hackathon..." required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Local</label>
                        <input type="text" class="form-control" id="localInput" placeholder="Ex: Guaíba, Unidade Canoas" required>
                    </div>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Data</label>
                            <input type="date" class="form-control" id="dataInput" required>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Status</label>
                            <select class="form-select" id="statusInput">
                                <option value="ativo">Ativo</option>
                                <option value="inativo">Inativo</option>
                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary-custom" onclick="salvarAtividade()">Salvar Atividade</button>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    const dadosIniciais = [
        {
            titulo: "Escola 1",
            local: "Guaíba",
            data: "2024-08-20",
            hora: "15:43",
            status: "ativo"
        },
        {
            titulo: "Palestra 2",
            local: "Escola",
            data: "2024-08-20",
            hora: "15:43",
            status: "inativo"
        },
        {
            titulo: "Hackathon 3",
            local: "Unidade Guaíba",
            data: "2024-08-20",
            hora: "15:43",
            status: "ativo"
        }
    ];

    function carregarDados() {
        const dadosArmazenados = localStorage.getItem('db_include_gurias');
        if (dadosArmazenados) {
            return JSON.parse(dadosArmazenados);
        } else {
            localStorage.setItem('db_include_gurias', JSON.stringify(dadosIniciais));
            return dadosIniciais;
        }
    }

    function renderizarCards() {
        const atividades = carregarDados();
        const container = document.getElementById('cardsContainer');
        container.innerHTML = ''; // Limpa antes de renderizar

        atividades.forEach(atv => {
            const dataObj = new Date(atv.data);
            const dataFormatada = dataObj.toLocaleDateString('pt-BR', { day: 'numeric', month: 'long' });

            const statusClass = atv.status === 'ativo' ? 'status-ativo' : 'status-inativo';

            const cardHTML = `
                <div class="col-md-4">
                    <div class="card-custom">
                        <div class="card-title-row">
                            <h5 class="card-title">${atv.titulo}</h5>
                            <span class="status-badge ${statusClass}">${atv.status}</span>
                        </div>
                        <div class="location-row">
                            <span class="material-symbols-outlined" style="font-size: 1.1rem;">location_on</span>
                            ${atv.local}
                        </div>
                        <div class="last-status">
                            Último status: ${dataFormatada}, ${atv.hora || '12:00'}
                        </div>
                        <button class="btn-more" onclick="alert('Detalhes de: ${atv.titulo}')">Mais informações</button>
                    </div>
                </div>
            `;
            container.innerHTML += cardHTML;
        });
    }

    // 4. Função para Salvar Nova Atividade
    function salvarAtividade() {
        const titulo = document.getElementById('tituloInput').value;
        const local = document.getElementById('localInput').value;
        const data = document.getElementById('dataInput').value;
        const status = document.getElementById('statusInput').value;

        if (!titulo || !local || !data) {
            alert("Por favor, preencha todos os campos!");
            return;
        }

        const novaAtividade = {
            titulo: titulo,
            local: local,
            data: data,
            hora: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }),
            status: status
        };

        // Salvar
        let atividades = carregarDados();
        atividades.push(novaAtividade);
        localStorage.setItem('db_include_gurias', JSON.stringify(atividades));

        // Fechar Modal
        const modalEl = document.getElementById('modalNovaAtividade');
        const modal = bootstrap.Modal.getInstance(modalEl);
        modal.hide();

        // Limpar form
        document.getElementById('formAtividade').reset();

        // Atualizar tela
        renderizarCards();
    }

    // Inicializar ao abrir
    document.addEventListener('DOMContentLoaded', renderizarCards);

</script>

</body>
</html>